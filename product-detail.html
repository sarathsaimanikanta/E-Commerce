<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Detail - ElectroShop</title>
    <link rel="stylesheet" href="main.css" />
    <link rel="stylesheet" href="components.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container header-content">
        <div class="header-left">
          <a href="index.html" class="logo">ElectroShop</a>
          <nav class="main-nav">
            <div class="nav-item dropdown">
              <button class="nav-button" id="electronicsDropdown">
                Electronics
                <svg
                  class="dropdown-icon"
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="m6 9 6 6 6-6" />
                </svg>
              </button>
              <div class="dropdown-menu" id="electronicsMenu">
                <a href="electronics.html" class="dropdown-item">
                  <div class="dropdown-title">All Electronics</div>
                  <div class="dropdown-desc">
                    Browse our full range of electronic products
                  </div>
                </a>
                <a href="smartphones.html" class="dropdown-item">
                  <div class="dropdown-title">Smartphones</div>
                  <div class="dropdown-desc">
                    Latest smartphones with cutting-edge technology
                  </div>
                </a>
                <a href="accessories.html" class="dropdown-item">
                  <div class="dropdown-title">Accessories</div>
                  <div class="dropdown-desc">
                    Enhance your device experience
                  </div>
                </a>
              </div>
            </div>
            <a href="new-arrivals.html" class="nav-link">New Arrivals</a>
            <a href="deals.html" class="nav-link">Deals</a>
          </nav>
        </div>
        <div class="header-right">
          <form class="search-form" id="searchForm">
            <input
              type="search"
              class="search-input"
              placeholder="Search products..."
              id="searchInput"
            />
            <button type="submit" class="search-button">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="11" cy="11" r="8" />
                <path d="m21 21-4.3-4.3" />
              </svg>
            </button>
          </form>
          <div class="header-actions">
            <a href="cart.html" class="action-button">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="8" cy="21" r="1" />
                <circle cx="19" cy="21" r="1" />
                <path
                  d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"
                />
              </svg>
            </a>
            <a href="account.html" class="action-button">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                <circle cx="12" cy="7" r="4" />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main>
      <div class="container">
        <div class="section">
          <!-- Breadcrumb -->
          <div id="breadcrumb" class="breadcrumb">
            <!-- Will be populated by JavaScript -->
          </div>

          <!-- Product Detail -->
          <div id="productDetail">
            <!-- Will be populated by JavaScript -->
          </div>

          <!-- Product Tabs -->
          <div class="tabs">
            <ul class="tab-list">
              <li>
                <button class="tab-button active" data-tab="overview">
                  Overview
                </button>
              </li>
              <li>
                <button class="tab-button" data-tab="specs">
                  Specifications
                </button>
              </li>
              <li>
                <button class="tab-button" data-tab="reviews">Reviews</button>
              </li>
            </ul>
          </div>

          <!-- Tab Contents -->
          <div id="overview" class="tab-content active">
            <div id="overviewContent">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>

          <div id="specs" class="tab-content">
            <div id="specsContent">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>

          <div id="reviews" class="tab-content">
            <div id="reviewsContent">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h3 class="footer-title">ElectroShop</h3>
            <p class="footer-description">
              Your one-stop destination for all electronics and accessories.
            </p>
          </div>
          <div class="footer-section">
            <h4 class="footer-subtitle">Shop</h4>
            <ul class="footer-links">
              <li><a href="electronics.html">Electronics</a></li>
              <li><a href="smartphones.html">Smartphones</a></li>
              <li><a href="accessories.html">Accessories</a></li>
              <li><a href="new-arrivals.html">New Arrivals</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4 class="footer-subtitle">Support</h4>
            <ul class="footer-links">
              <li><a href="contact.html">Contact Us</a></li>
              <li><a href="faq.html">FAQs</a></li>
              <li><a href="shipping.html">Shipping Info</a></li>
              <li><a href="returns.html">Returns & Refunds</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4 class="footer-subtitle">Stay Connected</h4>
            <div class="social-links">
              <a href="#" class="social-link">Facebook</a>
              <a href="#" class="social-link">Instagram</a>
              <a href="#" class="social-link">Twitter</a>
              <a href="#" class="social-link">LinkedIn</a>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2024 ElectroShop. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <script src="data.js"></script>
    <script src="main.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get("id");

        if (productId) {
          const product = getProductById(productId);
          if (product) {
            displayProductDetail(product);
          } else {
            displayProductNotFound();
          }
        } else {
          displayProductNotFound();
        }
      });

      function displayProductDetail(product) {
        document.title = `${product.name} - ElectroShop`;

        // Update breadcrumb
        const subcategoryLink =
          product.subcategory.toLowerCase() === "smartphones"
            ? "smartphones.html"
            : "accessories.html";
        document.getElementById("breadcrumb").innerHTML = `
                <a href="index.html">Home</a>
                <span>/</span>
                <a href="electronics.html">Electronics</a>
                <span>/</span>
                <a href="${subcategoryLink}">${product.subcategory}</a>
                <span>/</span>
                <span>${product.name}</span>
            `;

        const discountPercentage = product.originalPrice
          ? Math.round(
              ((product.originalPrice - product.price) /
                product.originalPrice) *
                100,
            )
          : 0;

        // Product detail section
        document.getElementById("productDetail").innerHTML = `
                <div class="product-detail-grid">
                    <div class="product-detail-image">
                        <img src="${product.image}" alt="${product.name}">
                        ${discountPercentage > 0 ? `<div class="product-badge" style="position: absolute; top: 1rem; right: 1rem;">${discountPercentage}% OFF</div>` : ""}
                    </div>
                    <div class="product-detail-info">
                        <div>
                            <h1 class="product-detail-title">${product.name}</h1>
                            <div class="product-meta">
                                <div class="product-rating-detail">
                                    <svg class="star-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                                    </svg>
                                    <span style="font-weight: 500;">${product.rating.toFixed(1)} Rating</span>
                                </div>
                                <span style="color: #6b7280;">|</span>
                                <span style="color: #6b7280;">${product.subcategory}</span>
                            </div>
                        </div>
                        <div>
                            <p style="font-size: 1.25rem; font-weight: 600;">
                                $${product.price}
                                ${product.originalPrice ? `<span style="font-size: 1rem; margin-left: 0.5rem; text-decoration: line-through; color: #6b7280;">$${product.originalPrice}</span>` : ""}
                            </p>
                            <p style="font-size: 0.875rem; color: ${product.inStock ? "#059669" : "#dc2626"}; font-weight: 500;">
                                ${product.inStock ? "In Stock" : "Out of Stock"}
                            </p>
                        </div>
                        <div>
                            <h3 style="font-weight: 500; margin-bottom: 0.25rem;">Description</h3>
                            <p style="color: #6b7280;">${product.description}</p>
                        </div>
                        <div class="quantity-controls">
                            <div class="quantity-selector">
                                <button class="quantity-btn" onclick="decrementQuantity()" aria-label="Decrease quantity">-</button>
                                <span class="quantity-display" id="quantity">1</span>
                                <button class="quantity-btn" onclick="incrementQuantity()" aria-label="Increase quantity">+</button>
                            </div>
                            <button class="btn btn-primary" style="flex: 1;" onclick="addToCartFromDetail('${product.id}')" ${!product.inStock ? "disabled" : ""}>
                                ${product.inStock ? "Add to Cart" : "Out of Stock"}
                            </button>
                        </div>
                        <button class="btn btn-outline" style="width: 100%;">Add to Wishlist</button>
                    </div>
                </div>
            `;

        // Overview tab content
        document.getElementById("overviewContent").innerHTML = `
                <div style="margin-bottom: 1rem;">
                    <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;">Product Overview</h2>
                    <p style="color: #6b7280; margin-bottom: 1.5rem;">${product.description}</p>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                    <div style="background: #f8fafc; padding: 1.5rem; border-radius: 0.5rem;">
                        <h3 style="font-weight: 600; margin-bottom: 0.75rem;">Key Features</h3>
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            ${Object.entries(product.specs)
                              .slice(0, 4)
                              .map(
                                ([key, value]) => `
                                <li style="display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #10b981; margin-top: 0.125rem; flex-shrink: 0;">
                                        <polyline points="20 6 9 17 4 12"/>
                                    </svg>
                                    <span><strong>${formatSpecName(key)}</strong>: ${value}</span>
                                </li>
                            `,
                              )
                              .join("")}
                        </ul>
                    </div>
                    <div style="background: #f8fafc; padding: 1.5rem; border-radius: 0.5rem;">
                        <h3 style="font-weight: 600; margin-bottom: 0.75rem;">What's in the Box</h3>
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            <li style="display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #3b82f6; margin-top: 0.125rem; flex-shrink: 0;">
                                    <rect width="18" height="18" x="3" y="3" rx="2"/>
                                    <path d="M7 3v18"/>
                                    <path d="M3 7h18"/>
                                </svg>
                                <span>1 x ${product.name}</span>
                            </li>
                            <li style="display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #3b82f6; margin-top: 0.125rem; flex-shrink: 0;">
                                    <path d="M5 18h14M5 14h14M5 10h14M5 6h14"/>
                                </svg>
                                <span>User Manual</span>
                            </li>
                            <li style="display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #3b82f6; margin-top: 0.125rem; flex-shrink: 0;">
                                    <path d="M12 8v4l3 3"/>
                                    <circle cx="12" cy="12" r="10"/>
                                </svg>
                                <span>1 Year Warranty Card</span>
                            </li>
                            <li style="display: flex; align-items: flex-start; gap: 0.5rem;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #3b82f6; margin-top: 0.125rem; flex-shrink: 0;">
                                    <path d="M5 8h14"/>
                                    <path d="M5 12h14"/>
                                    <path d="M5 16h14"/>
                                    <path d="M3 20h18"/>
                                    <path d="M3 4h18"/>
                                </svg>
                                <span>Charging Cable</span>
                            </li>
                        </ul>
                    </div>
                </div>
            `;

        // Specifications tab content
        document.getElementById("specsContent").innerHTML = `
                <div style="margin-bottom: 1rem;">
                    <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;">Technical Specifications</h2>
                </div>
                <div class="table-container">
                    <table style="width: 100%; border-collapse: collapse; background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; overflow: hidden;">
                        <tbody>
                            ${Object.entries(product.specs)
                              .map(
                                ([key, value]) => `
                                <tr style="border-bottom: 1px solid #e5e7eb;">
                                    <td style="padding: 0.75rem; font-weight: 500; background: #f8fafc; width: 200px;">${formatSpecName(key)}</td>
                                    <td style="padding: 0.75rem;">${value}</td>
                                </tr>
                            `,
                              )
                              .join("")}
                        </tbody>
                    </table>
                </div>
            `;

        // Reviews tab content
        document.getElementById("reviewsContent").innerHTML = `
                <div style="margin-bottom: 1rem;">
                    <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem;">Customer Reviews</h2>
                </div>
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                    <div style="display: flex; flex-direction: column; align-items: center; padding: 1rem; background: #f8fafc; border-radius: 0.5rem; min-width: 6rem;">
                        <div style="font-size: 2rem; font-weight: 700; line-height: 1;">${product.rating.toFixed(1)}</div>
                        <div style="display: flex; color: #f59e0b; margin: 0.25rem 0;">
                            ${Array(5)
                              .fill(0)
                              .map(
                                (_, i) => `
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="${i < Math.round(product.rating) ? "currentColor" : "none"}" stroke="currentColor" stroke-width="2">
                                    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                                </svg>
                            `,
                              )
                              .join("")}
                        </div>
                        <div style="font-size: 0.875rem; color: #6b7280;">54 reviews</div>
                    </div>
                    <div style="flex: 1;">
                        ${Array(5)
                          .fill(0)
                          .map((_, i) => {
                            const stars = 5 - i;
                            const percentage = Math.random() * 100;
                            const count = Math.floor(Math.random() * 30);
                            return `
                                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <div style="width: 2rem; text-align: right; font-size: 0.875rem;">${stars} star</div>
                                    <div style="flex: 1; height: 0.5rem; background: #e5e7eb; border-radius: 9999px; overflow: hidden;">
                                        <div style="height: 100%; background: #f59e0b; width: ${percentage}%;"></div>
                                    </div>
                                    <div style="width: 2rem; font-size: 0.875rem; color: #6b7280;">${count}</div>
                                </div>
                            `;
                          })
                          .join("")}
                    </div>
                </div>
                <button class="btn btn-primary">Write a Review</button>
                <div style="margin-top: 2rem;">
                    <p style="text-align: center; color: #6b7280; padding: 2rem 0;">
                        Be the first to review this product
                    </p>
                </div>
            `;
      }

      function displayProductNotFound() {
        document.getElementById("productDetail").innerHTML = `
                <div style="text-align: center; padding: 4rem 0;">
                    <h1 style="font-size: 2rem; font-weight: 600; margin-bottom: 1rem;">Product Not Found</h1>
                    <p style="color: #6b7280; margin-bottom: 2rem;">
                        The product you're looking for doesn't exist or has been removed.
                    </p>
                    <a href="electronics.html" class="btn btn-primary">Browse Products</a>
                </div>
            `;
      }

      let quantity = 1;

      function incrementQuantity() {
        quantity++;
        document.getElementById("quantity").textContent = quantity;
      }

      function decrementQuantity() {
        if (quantity > 1) {
          quantity--;
          document.getElementById("quantity").textContent = quantity;
        }
      }

      function addToCartFromDetail(productId) {
        addToCart(productId, quantity);
      }
    </script>
  </body>
</html>
